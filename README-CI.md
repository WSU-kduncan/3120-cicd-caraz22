# Documentation
## Part 1 - Dockerize it
### CI Project Overview
* The goal of this project is to use Docker to create a container image and control it using DockerHub and GitHub actions.
### Run project locally  
* To install Docker, you first need to download a couple of things. There is a [great guide online](https://www.omgubuntu.co.uk/how-to-install-wsl2-on-windows-10) with download links for multiple versions of WSL 2. The site also has a download link for Ubuntu 20.04. After that, you should be able to open up Ubuntu on a terminal. Next, you want to install Docker Desktop, version relative to your OS. Now, you should be able to use docker commands on your WSL2 Ubuntu terminal!
* Your Dockerfile will be different depending on whether you use apache2 or nginx.   
    * You will need the `FROM` command to determine what the base image you start off with is.  
    * You will need the `RUN` command to install any necessary dependencies.
    * You will need the `COPY` command to copy any files into the image.  
    * You will need the `EXPOSE` command to open a specified port of the image.  
    * You will need the `CMD` command to have your specified commands be ran whenever you use `docker run` on the image
* To run the container, you can use the command `docker run -p <x>:<y> <z>`, where `x` is the host port, `y` is the remote port, and `z` is the name of the image.  
* Once you have the container up and running, you can go to the URL bar at the top of your internet browser and type in `localhost:<x>`, where `x` is the port number you used in your Dockerfile and `docker run` command.  
## Part 2 - GitHub Actions and DockerHub
### Process to create public repo in DockerHub
*  Once you have created a DockerHub account, you can go to your repositories by clicking the "Repositories" tab at the top of the screen. From there, you can click on "Create repository" towards the top right of your screen. It will prompt you for a repository name and an optional description of the repository. You have the option between making the repository public or private. In this case, we want to make sure that public is the one selected.
### How to authenticate with DockerHub via CLI using DockerHub credentials
* A basic way authenticate is using `docker login` and entering in your username and password. However, using an authentication token is safer. This can be generated by going to your account settings, selecting the "Security" tab on the left, and clicking "New Access Token". It will ask you for a description of the access token, and you must define the access permissions for said token. Once created, the token can be used in the following command `docker login -u <username> -p <token>` for authentication.  
### How to push container image to DockerHub (without GitHub Actions)  
*  After you create your public DockerHub repository, you will be given a command in the "General" tab on the right of the screen. It is as follows: `docker push <username>/<repo name>:<version of image>`
### Configuring GitHub Secrets
* To set a GitHub secret, you go to the settings tab of your repository. From there, you scroll down to find the "Secrets and variables" tab on the left. If you click "Actions" on the drop down, it will bring you to a page where you can create a new repository secret. You will just have to specify a name, and then of course whatever the secret is.
* The secrets set for this are just of your username and password. 
### Behavior of GitHub workflow
* My workflow is trigerred by a push to the main branch. It has one job, which is to build a docker image and push it to DockerHub. I have an `env` variable of my DockerHub repository. It runs on Ubuntu's latest version. The job has multiple steps, including checking out the repo to the runner, setting up Docker Buildx, logging in to Dockerhub, and building and pushing.
* Variables that are specific to my workflow are the name of my DockerHub repo, the version of Ubuntu that the workflow runs on, and the name of my "secrets" variables to login to DockerHub.